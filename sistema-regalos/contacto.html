<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Contacto - COOMOTOR Regalos Navide√±os</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link href="css/responsive-global.css" rel="stylesheet">
    <style>
        :root {
            --primary-red: #dc2626;
            --primary-green: #059669;
            --accent-gold: #d97706;
            --neutral-50: #f9fafb;
            --neutral-100: #f3f4f6;
            --neutral-200: #e5e7eb;
            --neutral-600: #4b5563;
            --neutral-800: #1f2937;
            --neutral-900: #111827;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', sans-serif;
            background: var(--neutral-50);
            color: var(--neutral-800);
            line-height: 1.6;
            padding-top: 80px;
        }

        .navbar {
            background: white;
            border-bottom: 1px solid var(--neutral-200);
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
            position: fixed;
            width: 100%;
            top: 0;
            z-index: 1050;
        }

        .navbar-brand {
            font-weight: 600;
            color: var(--primary-green) !important;
        }

        .nav-link {
            color: var(--neutral-600) !important;
            font-weight: 500;
        }

        .nav-link:hover, .nav-link.active {
            color: var(--primary-green) !important;
        }

        .contact-container {
            max-width: 1000px;
            margin: 0 auto;
            padding: 2rem 1rem;
        }

        .contact-header {
            text-align: center;
            margin-bottom: 3rem;
        }

        .contact-header h1 {
            font-size: 2.5rem;
            font-weight: 700;
            color: var(--neutral-900);
            margin-bottom: 1rem;
        }

        .contact-header p {
            font-size: 1.125rem;
            color: var(--neutral-600);
            max-width: 600px;
            margin: 0 auto;
        }

        .contact-cards {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 2rem;
            margin-bottom: 3rem;
        }

        .contact-card {
            background: white;
            border-radius: 12px;
            padding: 2rem;
            border: 1px solid var(--neutral-200);
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
            transition: all 0.2s ease;
            text-align: center;
        }

        .contact-card:hover {
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            transform: translateY(-2px);
        }

        .contact-card-icon {
            font-size: 2.5rem;
            color: var(--primary-green);
            margin-bottom: 1rem;
        }

        .contact-card h3 {
            color: var(--neutral-900);
            font-weight: 600;
            margin-bottom: 1rem;
        }

        .contact-card p {
            color: var(--neutral-600);
        }

        .form-container {
            background: white;
            border-radius: 12px;
            padding: 2rem;
            border: 1px solid var(--neutral-200);
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
            margin-bottom: 3rem;
        }

        .form-header {
            text-align: center;
            margin-bottom: 2rem;
        }

        .form-header h2 {
            font-size: 1.875rem;
            font-weight: 600;
            color: var(--neutral-900);
            margin-bottom: 0.5rem;
        }

        .form-header p {
            color: var(--neutral-600);
        }

        .form-label {
            font-weight: 500;
            color: var(--neutral-800);
            margin-bottom: 0.5rem;
        }

        .form-control, .form-select {
            border: 1px solid var(--neutral-200);
            border-radius: 8px;
            padding: 0.75rem 1rem;
            font-size: 0.875rem;
            transition: all 0.2s ease;
        }

        .form-control:focus, .form-select:focus {
            border-color: var(--primary-green);
            box-shadow: 0 0 0 3px rgba(5, 150, 105, 0.1);
        }

        .form-control:read-only {
            background-color: #f3f4f6 !important;
            cursor: not-allowed;
            border-color: #d1d5db;
        }

        .form-control:read-only:focus {
            border-color: #d1d5db;
            box-shadow: none;
        }

        .locked-field-badge {
            display: inline-block;
            background: #e5e7eb;
            color: #6b7280;
            padding: 0.25rem 0.5rem;
            border-radius: 4px;
            font-size: 0.75rem;
            margin-left: 0.5rem;
        }

        .btn-submit {
            background: var(--primary-green);
            border: none;
            color: white;
            font-weight: 500;
            padding: 0.75rem 2rem;
            border-radius: 8px;
            transition: all 0.2s ease;
            width: 100%;
        }

        .btn-submit:hover {
            background: #047857;
            color: white;
        }

        .btn-back {
            background: transparent;
            border: 1px solid var(--primary-green);
            color: var(--primary-green);
            padding: 0.5rem 1rem;
            border-radius: 8px;
            font-weight: 500;
            text-decoration: none;
            display: inline-block;
            transition: all 0.2s ease;
            margin-bottom: 2rem;
        }

        .btn-back:hover {
            background: var(--primary-green);
            color: white;
            text-decoration: none;
        }

        .contact-info {
            background: white;
            border-radius: 12px;
            padding: 2rem;
            border: 1px solid var(--neutral-200);
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
        }

        .contact-info h3 {
            color: var(--neutral-900);
            font-weight: 600;
            text-align: center;
            margin-bottom: 2rem;
        }

        .contact-info-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 2rem;
        }

        .contact-info-item {
            text-align: center;
        }

        .contact-info-item i {
            font-size: 2rem;
            color: var(--primary-green);
            margin-bottom: 1rem;
        }

        .contact-info-item h5 {
            color: var(--neutral-900);
            font-weight: 600;
            margin-bottom: 0.5rem;
        }

        .contact-info-item p {
            color: var(--neutral-600);
            margin: 0;
        }

        .alert {
            border-radius: 8px;
            border: none;
            margin-bottom: 1rem;
        }

        .loading {
            display: none;
            text-align: center;
            margin: 1rem 0;
        }

        .spinner {
            border: 3px solid var(--neutral-200);
            border-top: 3px solid var(--primary-green);
            border-radius: 50%;
            width: 30px;
            height: 30px;
            animation: spin 1s linear infinite;
            margin: 0 auto;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        @media (max-width: 768px) {
            .contact-header h1 {
                font-size: 2rem;
            }
            
            .form-container, .contact-info {
                padding: 1.5rem;
            }
            
            .contact-cards {
                grid-template-columns: 1fr;
                gap: 1.5rem;
            }
            
            .contact-card {
                padding: 1.5rem;
            }
        }
    </style>
</head>
<body>
    <!-- Navbar -->
    <nav class="navbar navbar-expand-lg">
        <div class="container">
            <a class="navbar-brand" href="index.html">
                <i class="bi bi-gift-fill me-2"></i>
                COOMOTOR Regalos Navide√±os
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav me-auto">
                    <li class="nav-item">
                        <a class="nav-link" href="index.html">üè† Inicio</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="auth/login.html">üîë Iniciar Sesi√≥n</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="auth/registro.html">üìù Registrarse</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link active" href="contacto.html">üìû Contacto</a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <div class="contact-container">
        <!-- Header -->
        <div class="contact-header">
            <h1>Cont√°ctanos</h1>
            <p>¬øTienes alguna queja, sugerencia o consulta sobre nuestro programa de regalos navide√±os? 
               Estamos aqu√≠ para escucharte y mejorar tu experiencia COOMOTOR.</p>
        </div>

        <!-- Bot√≥n de regreso -->
        <div class="text-center">
            <a href="index.html" class="btn-back">
                <i class="bi bi-arrow-left me-2"></i>
                Volver al Inicio
            </a>
        </div>

        <!-- Cards de tipos de contacto -->
        <div class="contact-cards">
            <div class="contact-card">
                <div class="contact-card-icon">
                    <i class="bi bi-exclamation-triangle-fill"></i>
                </div>
                <h3>Quejas y Reclamos</h3>
                <p>¬øAlgo no sali√≥ como esperabas? Cu√©ntanos tu experiencia para poder mejorar nuestro servicio y hacer que tu pr√≥xima experiencia sea perfecta.</p>
            </div>

            <div class="contact-card">
                <div class="contact-card-icon">
                    <i class="bi bi-lightbulb-fill"></i>
                </div>
                <h3>Sugerencias</h3>
                <p>Tus ideas son valiosas para nosotros. Comparte tus sugerencias para hacer que nuestro programa de regalos navide√±os sea a√∫n mejor.</p>
            </div>

            <div class="contact-card">
                <div class="contact-card-icon">
                    <i class="bi bi-question-circle-fill"></i>
                </div>
                <h3>Consultas Generales</h3>
                <p>¬øTienes dudas sobre el proceso, fechas, o cualquier aspecto del programa? Estamos aqu√≠ para resolver todas tus preguntas.</p>
            </div>
        </div>

        <!-- Formulario de contacto -->
        <div class="form-container">
            <div class="form-header">
                <h2>Formulario de Contacto</h2>
                <p>Completa el siguiente formulario y nos pondremos en contacto contigo lo antes posible</p>
            </div>

            <div id="alertContainer"></div>

            <form id="contactForm">
                <div class="row">
                    <div class="col-md-6">
                        <div class="form-group">
                            <label class="form-label" for="nombres">
                                <i class="bi bi-person-fill me-2"></i>Nombres Completos *
                            </label>
                            <input type="text" class="form-control" id="nombres" name="nombres" required 
                                   placeholder="Ingresa tus nombres completos">
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="form-group">
                            <label class="form-label" for="apellidos">
                                <i class="bi bi-person-fill me-2"></i>Apellidos Completos *
                            </label>
                            <input type="text" class="form-control" id="apellidos" name="apellidos" required 
                                   placeholder="Ingresa tus apellidos completos">
                        </div>
                    </div>
                </div>

                <div class="row">
                    <div class="col-md-6">
                        <div class="form-group">
                            <label class="form-label" for="cedula">
                                <i class="bi bi-card-text me-2"></i>N√∫mero de C√©dula *
                            </label>
                            <input type="text" class="form-control" id="cedula" name="cedula" required 
                                   placeholder="Ej: 12345678" pattern="[0-9]{7,10}">
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="form-group">
                            <label class="form-label" for="telefono">
                                <i class="bi bi-telephone-fill me-2"></i>Tel√©fono/Celular *
                            </label>
                            <input type="tel" class="form-control" id="telefono" name="telefono" required 
                                   placeholder="Ej: 3001234567" pattern="[0-9]{10}">
                        </div>
                    </div>
                </div>

                <div class="form-group">
                    <label class="form-label" for="email">
                        <i class="bi bi-envelope-fill me-2"></i>Correo Electr√≥nico *
                    </label>
                    <input type="email" class="form-control" id="email" name="email" required 
                           placeholder="ejemplo@correo.com">
                </div>

                <div class="row">
                    <div class="col-md-6">
                        <div class="form-group">
                            <label class="form-label" for="tipoContacto">
                                <i class="bi bi-tag-fill me-2"></i>Tipo de Contacto *
                            </label>
                            <select class="form-select" id="tipoContacto" name="tipoContacto" required>
                                <option value="">Selecciona una opci√≥n</option>
                                <option value="queja">üö® Queja o Reclamo</option>
                                <option value="sugerencia">üí° Sugerencia</option>
                                <option value="consulta">‚ùì Consulta General</option>
                                <option value="felicitacion">üéâ Felicitaci√≥n</option>
                                <option value="problema_tecnico">üîß Problema T√©cnico</option>
                                <option value="otro">üìã Otro</option>
                            </select>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="form-group">
                            <label class="form-label" for="prioridad">
                                <i class="bi bi-exclamation-circle-fill me-2"></i>Prioridad
                            </label>
                            <select class="form-select" id="prioridad" name="prioridad">
                                <option value="baja">üü¢ Baja</option>
                                <option value="media" selected>üü° Media</option>
                                <option value="alta">üü† Alta</option>
                                <option value="urgente">üî¥ Urgente</option>
                            </select>
                        </div>
                    </div>
                </div>

                <div class="form-group">
                    <label class="form-label" for="asunto">
                        <i class="bi bi-chat-text-fill me-2"></i>Asunto *
                    </label>
                    <input type="text" class="form-control" id="asunto" name="asunto" required 
                           placeholder="Describe brevemente el motivo de tu contacto" maxlength="100">
                </div>

                <div class="form-group">
                    <label class="form-label" for="mensaje">
                        <i class="bi bi-chat-dots-fill me-2"></i>Mensaje Detallado *
                    </label>
                    <textarea class="form-control" id="mensaje" name="mensaje" rows="6" required 
                              placeholder="Describe detalladamente tu consulta, queja o sugerencia. Incluye toda la informaci√≥n relevante para poder ayudarte mejor." 
                              maxlength="1000"></textarea>
                    <small class="text-muted">M√°ximo 1000 caracteres</small>
                </div>

                <div class="form-group">
                    <div class="form-check">
                        <input class="form-check-input" type="checkbox" id="autorizacion" name="autorizacion" required>
                        <label class="form-check-label" for="autorizacion">
                            Autorizo el tratamiento de mis datos personales de acuerdo con la pol√≠tica de privacidad de COOMOTOR *
                        </label>
                    </div>
                </div>

                <div class="loading" id="loading">
                    <div class="spinner"></div>
                    <p>Enviando tu mensaje...</p>
                </div>

                <button type="submit" class="btn-submit" id="submitBtn">
                    <i class="bi bi-send-fill me-2"></i>
                    Enviar Mensaje
                </button>
            </form>
        </div>

        <!-- Informaci√≥n de contacto adicional -->
        <div class="contact-info">
            <h3>Informaci√≥n de Contacto COOMOTOR</h3>
            <div class="contact-info-grid">
                <div class="contact-info-item">
                    <i class="bi bi-geo-alt-fill"></i>
                    <h5>Direcci√≥n</h5>
                    <p>Sede Principal COOMOTOR<br>Colombia</p>
                </div>
                <div class="contact-info-item">
                    <i class="bi bi-telephone-fill"></i>
                    <h5>Tel√©fono</h5>
                    <p>L√≠nea de Atenci√≥n<br>+57 (3045295837)</p>
                </div>
                <div class="contact-info-item">
                    <i class="bi bi-envelope-fill"></i>
                    <h5>Email</h5>
                    <p>contacto@coomotor.com<br>regalos@coomotor.com</p>
                </div>
                <div class="contact-info-item">
                    <i class="bi bi-clock-fill"></i>
                    <h5>Horario de Atenci√≥n</h5>
                    <p>Lunes a Viernes<br>8:00 AM - 6:00 PM</p>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    <script src="js/auth-global.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const form = document.getElementById('contactForm');
            const submitBtn = document.getElementById('submitBtn');
            const loading = document.getElementById('loading');
            const alertContainer = document.getElementById('alertContainer');

            // ============================================
            // AUTOCOMPLETAR DATOS SI EL USUARIO EST√Å AUTENTICADO
            // ============================================
            function cargarDatosUsuario() {
                const token = localStorage.getItem('coomotor_token');
                const userData = localStorage.getItem('coomotor_user');

                if (token && userData) {
                    try {
                        const usuario = JSON.parse(userData);
                        
                        // Llenar campos autom√°ticamente
                        document.getElementById('nombres').value = usuario.nombres || '';
                        document.getElementById('apellidos').value = usuario.apellidos || '';
                        document.getElementById('email').value = usuario.correo || '';
                        document.getElementById('telefono').value = usuario.celular || '';
                        document.getElementById('cedula').value = usuario.numero_documento || '';

                        // Hacer los campos de solo lectura (no editables)
                        document.getElementById('nombres').readOnly = true;
                        document.getElementById('apellidos').readOnly = true;
                        document.getElementById('email').readOnly = true;
                        document.getElementById('telefono').readOnly = true;
                        document.getElementById('cedula').readOnly = true;

                        // Agregar estilo visual para indicar que est√°n bloqueados
                        const camposBloqueados = ['nombres', 'apellidos', 'email', 'telefono', 'cedula'];
                        camposBloqueados.forEach(campo => {
                            const elemento = document.getElementById(campo);
                            elemento.style.backgroundColor = '#f3f4f6';
                            elemento.style.cursor = 'not-allowed';
                            elemento.classList.add('is-valid');
                            
                            // Agregar badge de "Datos del perfil" al label
                            const label = elemento.parentElement.querySelector('label');
                            if (label && !label.querySelector('.locked-field-badge')) {
                                const badge = document.createElement('span');
                                badge.className = 'locked-field-badge';
                                badge.innerHTML = '<i class="bi bi-lock-fill me-1"></i>Datos del perfil';
                                label.appendChild(badge);
                            }
                        });

                        // Mostrar mensaje informativo
                        showAlert(`
                            <i class="bi bi-info-circle-fill me-2"></i>
                            <strong>¬°Hola ${usuario.nombres}!</strong> 
                            <br>Tus datos personales se han cargado autom√°ticamente desde tu perfil.
                            <br>Solo necesitas completar el tipo de contacto, asunto y mensaje.
                        `, 'info');

                        // Actualizar el navbar para mostrar que est√° autenticado
                        actualizarNavbar(usuario);

                    } catch (error) {
                        console.error('Error al cargar datos del usuario:', error);
                    }
                }
            }

            // Actualizar navbar para usuario autenticado
            function actualizarNavbar(usuario) {
                const navbarNav = document.querySelector('.navbar-nav');
                if (navbarNav) {
                    navbarNav.innerHTML = `
                        <li class="nav-item">
                            <a class="nav-link" href="index.html">üè† Inicio</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="dashboards/${usuario.rol === 'admin' ? 'admin' : 'empleado'}.html">
                                üìä Mi Dashboard
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link active" href="contacto.html">üìû Contacto</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="#" onclick="cerrarSesion(); return false;">
                                üö™ Cerrar Sesi√≥n
                            </a>
                        </li>
                        <li class="nav-item">
                            <span class="nav-link">
                                <i class="bi bi-person-circle me-1"></i>
                                ${usuario.nombres}
                            </span>
                        </li>
                    `;
                }
            }

            // Cargar datos del usuario al iniciar
            cargarDatosUsuario();

            // Contador de caracteres para el mensaje
            const mensajeTextarea = document.getElementById('mensaje');
            mensajeTextarea.addEventListener('input', function() {
                const remaining = 1000 - this.value.length;
                const small = this.parentNode.querySelector('small');
                small.textContent = `${remaining} caracteres restantes`;
                if (remaining < 100) {
                    small.style.color = '#e74c3c';
                } else {
                    small.style.color = '#6c757d';
                }
            });

            // Validaci√≥n en tiempo real
            const inputs = form.querySelectorAll('input, select, textarea');
            inputs.forEach(input => {
                input.addEventListener('blur', validateField);
                input.addEventListener('input', clearFieldError);
            });

            function validateField(e) {
                const field = e.target;
                const value = field.value.trim();
                
                // Limpiar errores previos
                field.classList.remove('is-invalid');
                
                if (field.hasAttribute('required') && !value) {
                    showFieldError(field, 'Este campo es obligatorio');
                    return false;
                }

                // Validaciones espec√≠ficas
                switch (field.type) {
                    case 'email':
                        if (value && !isValidEmail(value)) {
                            showFieldError(field, 'Ingresa un correo electr√≥nico v√°lido');
                            return false;
                        }
                        break;
                    case 'tel':
                        if (value && !isValidPhone(value)) {
                            showFieldError(field, 'Ingresa un n√∫mero de tel√©fono v√°lido (10 d√≠gitos)');
                            return false;
                        }
                        break;
                }

                if (field.name === 'cedula' && value && !isValidCedula(value)) {
                    showFieldError(field, 'Ingresa un n√∫mero de c√©dula v√°lido (7-10 d√≠gitos)');
                    return false;
                }

                field.classList.add('is-valid');
                return true;
            }

            function clearFieldError(e) {
                const field = e.target;
                field.classList.remove('is-invalid');
                const feedback = field.parentNode.querySelector('.invalid-feedback');
                if (feedback) {
                    feedback.remove();
                }
            }

            function showFieldError(field, message) {
                field.classList.add('is-invalid');
                
                // Remover mensaje de error previo
                const existingFeedback = field.parentNode.querySelector('.invalid-feedback');
                if (existingFeedback) {
                    existingFeedback.remove();
                }
                
                // Agregar nuevo mensaje de error
                const feedback = document.createElement('div');
                feedback.className = 'invalid-feedback';
                feedback.textContent = message;
                field.parentNode.appendChild(feedback);
            }

            // Validadores
            function isValidEmail(email) {
                return /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email);
            }

            function isValidPhone(phone) {
                return /^[0-9]{10}$/.test(phone);
            }

            function isValidCedula(cedula) {
                return /^[0-9]{7,10}$/.test(cedula);
            }

            // Env√≠o del formulario
            form.addEventListener('submit', async function(e) {
                e.preventDefault();

                // Validar todos los campos
                let isValid = true;
                inputs.forEach(input => {
                    if (!validateField({ target: input })) {
                        isValid = false;
                    }
                });

                if (!isValid) {
                    showAlert('Por favor corrige los errores en el formulario', 'danger');
                    return;
                }

                // Mostrar loading
                submitBtn.disabled = true;
                loading.style.display = 'block';

                try {
                    const formData = new FormData(form);
                    const data = Object.fromEntries(formData.entries());

                    const response = await fetch('/api/contacto', {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json'
                        },
                        body: JSON.stringify(data)
                    });

                    const result = await response.json();
                    

                    if (response.ok) {
                        showAlert(`¬°Mensaje enviado exitosamente! 
                                  <br><br>
                                  <strong>üìã N√∫mero de Ticket:</strong> ${result.ticket}
                                  <br><br>
                                  üìû <strong>Pr√≥ximos pasos:</strong>
                                  <br>‚Ä¢ Tu mensaje ha sido guardado en nuestro sistema
                                  <br>‚Ä¢ Nuestro equipo lo revisar√° y te contactar√° pronto
                                  <br>‚Ä¢ Tiempo estimado de respuesta: 24-48 horas
                                  <br>‚Ä¢ Te contactaremos al tel√©fono o correo proporcionado
                                  <br><br>
                                  <strong>¬°Gracias por contactar a COOMOTOR!</strong>`, 'success');
                        form.reset();
                        inputs.forEach(input => {
                            input.classList.remove('is-valid', 'is-invalid');
                        });
                    } else {
                        showAlert(result.message || 'Error al enviar el mensaje. Int√©ntalo de nuevo.', 'danger');
                    }
                } catch (error) {
                    console.error('Error:', error);
                    showAlert('Error de conexi√≥n. Verifica tu internet e int√©ntalo de nuevo.', 'danger');
                } finally {
                    submitBtn.disabled = false;
                    loading.style.display = 'none';
                }
            });

            function showAlert(message, type) {
                alertContainer.innerHTML = `
                    <div class="alert alert-${type} alert-dismissible fade show" role="alert">
                        <i class="bi bi-${type === 'success' ? 'check-circle-fill' : 'exclamation-triangle-fill'} me-2"></i>
                        ${message}
                        <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
                    </div>
                `;

                // Auto-hide success alerts
                if (type === 'success') {
                    setTimeout(() => {
                        const alert = alertContainer.querySelector('.alert');
                        if (alert) {
                            alert.remove();
                        }
                    }, 5000);
                }

                // Scroll to alert
                alertContainer.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
            }
        });
    </script>
    
    <!-- Footer Legal Autom√°tico -->
    <script src="js/footer-legal.js"></script>
</body>
</html>